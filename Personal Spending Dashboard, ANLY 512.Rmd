---
title: "Personal Spending Dashboard"
output:
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: scroll
    theme: cosmo
    source_code: embed
    self_contained: true
output_file: index.html
---

```{r setup, include=FALSE}

pal <- list(
  trend       = "#2E86AB",   # blue
  projection  = "#2CA02C",   # green
  category    = "#F39C12",   # orange
  vendors     = "#8E44AD",   # purple
  weekday     = "#1F77B4",   # blue
  weekend     = "#FF7F0E"    # orange
)

library(tidyverse)
library(lubridate)
library(flexdashboard)
library(plotly)
library(ggpmisc)
```

## Overview {.storyboard}

### Project Summary

This dashboard is my personal financial mirror. Every number here comes from my own transactions, cleaned, categorized, and visualized to see exactly where my money goes and how it moves over time.

The focus isn’t on every penny—it’s on patterns that matter: how my monthly totals shift, which categories dominate, the vendors that pull the most cash, how my behavior changes on weekends, and even a forward-looking estimate of what next month might bring if I stay on my current path.

I use this not as a guilt trip but as a decision tool. A spike in the monthly trend tells me to investigate; a projection above my comfort zone tells me to cut back now. If the top vendors keep showing up, I know exactly where to renegotiate, switch, or put spending rules in place. When weekends start to outpace weekdays, I shift part of my budget into a “social/impulse” envelope before Friday.


**Questions explored:**

1. How has my total spending changed month to month?
2. What are my top spending categories?
3. Which vendors or services do I spend the most on?
4. How does weekend spending compare to weekdays?
5. If current habits continue, what will I likely spend next month?

**Data & Tools:**
- Data collected manually from bank statements and categorized
- Processed using `tidyverse`, `lubridate`, and visualized with `ggplot2` and `plotly`
- Dashboard built using `flexdashboard` to ensure scrollable, clean presentation with interactivity.

---

```{r data-prep}
df <- read_csv("merged_personal_spending.csv") %>%
  mutate(
    Date = as.Date(Date),
    Month = floor_date(Date, "month"),
    Weekday = wday(Date, label = TRUE),
    Weekend = if_else(Weekday %in% c("Sat", "Sun"), "Weekend", "Weekday")
  )
```

## Row 1: Trends {data-height=380}

### Monthly Spending Trend
```{r}
monthly_trend <- df %>%
  group_by(Month) %>%
  summarise(Total = sum(Amount), .groups = "drop")

plot_ly(monthly_trend,
        x = ~Month, y = ~Total,
        type = "scatter", mode = "lines+markers",
        line = list(color = pal$trend, width = 3),
        marker = list(size = 7, color = pal$trend)) %>%
  layout(title = "Monthly Spending Trend",
         yaxis = list(title = "Total ($)"),
         xaxis = list(title = "Month"))

```

### Projected Next Month's Spend
```{r}
# Simple linear trend projection line
fit <- lm(Total ~ as.numeric(Month), data = monthly_trend)

plot_ly() %>%
  add_markers(data = monthly_trend,
              x = ~Month, y = ~Total,
              name = "Observed",
              marker = list(size = 7, color = pal$trend)) %>%
  add_lines(data = monthly_trend,
            x = ~Month,
            y = ~fitted(fit),
            name = "Projection",
            line = list(color = pal$projection, width = 3, dash = "solid")) %>%
  layout(title = "Projected Spending Based on Trend",
         yaxis = list(title = "Total ($)"),
         xaxis = list(title = "Month"),
         legend = list(orientation = "h", x = 0, y = -0.2))


```

## Categories & Vendors

### Total Spending by Category
```{r}
top_cats <- df %>%
  group_by(Category) %>%
  summarise(Total = sum(Amount), .groups = "drop") %>%
  arrange(desc(Total)) %>%
  mutate(Category = factor(Category, levels = Category))

plot_ly(top_cats,
        x = ~Category, y = ~Total,
        type = "bar",
        marker = list(color = pal$category)) %>%
  layout(title = "Total Spending by Category",
         xaxis = list(title = "Category"),
         yaxis = list(title = "Total ($)"))


```

### Top Vendors by Spend
```{r}
top_vendors <- df %>%
  group_by(Description) %>%
  summarise(Total = sum(Amount), .groups = "drop") %>%
  arrange(desc(Total)) %>%
  slice_head(n = 10) %>%
  mutate(Description = factor(Description, levels = Description))

plot_ly(top_vendors,
        x = ~Description, y = ~Total,
        type = "bar",
        marker = list(color = pal$vendors)) %>%
  layout(title = "Top 10 Vendors by Spend",
         xaxis = list(title = "Vendor"),
         yaxis = list(title = "Total ($)"))


```

## Behavior Insights

### Weekend vs Weekday Spending
```{r}
weekend_comp <- df %>%
  group_by(Weekend) %>%
  summarise(Total = sum(Amount), .groups = "drop") %>%
  mutate(Weekend = factor(Weekend, levels = c("Weekday", "Weekend")),
         color   = if_else(Weekend == "Weekday", pal$weekday, pal$weekend))

plot_ly(weekend_comp,
        x = ~Weekend, y = ~Total,
        type = "bar",
        marker = list(color = weekend_comp$color)) %>%
  layout(title = "Weekend vs Weekday Spending",
         xaxis = list(title = ""),
         yaxis = list(title = "Total ($)"))


```

### Reflections

- My monthly spending isn’t flat—it swings, with clear peaks that tie to specific events or purchases.
- Groceries and general expenses are the heaviest hitters; trimming either by even 10% would move the total more than cutting several smaller categories combined.
- A few vendors account for most of the outflow—concentrated spend means concentrated opportunity to save.
- Weekend spending tends to be higher, confirming my hunch that social time comes with a price tag.
- The projection suggests next month could be above my comfort level if I don’t adjust now.
- My cumulative spend curve shows bursts of activity, usually around mid-month, which tells me exactly when my discipline slips.

In short, this dashboard turns raw transactions into a living feedback loop. It’s not about tracking for tracking’s sake—it’s about spotting the signal in my own noise and acting before small habits become expensive trends.